(this.webpackJsonptestcase=this.webpackJsonptestcase||[]).push([[0],{99:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(12),s=n.n(r),u=n(23),i=n(147),o=n(148),d=n(25),j=n(24),b=n(22),l=n(16),O=n(61),f=n(50),h=n(13),x=n.n(h),p=n(18),m=n(52),v="/testcase",y=function(){var e=Object(p.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/currencyNsi.php"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={fetch:function(){var e=Object(p.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/list.php"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=Object(p.a)(x.a.mark((function e(t,n,c){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/add.php"),{method:"POST",body:JSON.stringify({from_currency:t,to_currency:n,amount:c})});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),save:function(){var e=Object(p.a)(x.a.mark((function e(){var t,n,c,a=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],n=a.length>1&&void 0!==a[1]?a[1]:[],e.next=4,fetch("".concat(v,"/update.php"),{method:"POST",body:JSON.stringify({deleted:n,updated:t})});case 4:return c=e.sent,e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},w=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},k=Object(d.b)("conversions/load",Object(p.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.fetch();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),C=Object(d.b)("conversions/add",function(){var e=Object(p.a)(x.a.mark((function e(t,n){var c,a,r,s,u,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.from,a=t.to,r=t.amount,s=n.dispatch,u=n.rejectWithValue,e.next=4,g.add(c,a,r);case 4:if(i=e.sent,!i.success){e.next=11;break}o=w(i,["amount","converted","course","date_added","from_currency","id","to_currency"]),s(R.addRow(o)),e.next=12;break;case 11:return e.abrupt("return",u(i.message));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(d.b)("conversions/save",function(){var e=Object(p.a)(x.a.mark((function e(t,n){var c,a,r,s,u,i,o,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,a=n.getState,r=n.rejectWithValue,s=P(a()),u=s.reduce((function(e,t){var n=t.state,c=Object(f.a)(t,["state"]);return n&&e[n].push(c),e}),Object.keys(E).reduce((function(e,t){return e[t]=[],console.log(e),e}),{})),i=u.REMOVED,o=u.UPDATED,e.next=5,g.save(o,i);case 5:if(!(d=e.sent).success){e.next=10;break}d.updated.forEach((function(e){var t=e.id,n=Object(f.a)(e,["id"]);return c(R.updateRow({id:t,data:n,track:!1}))})),e.next=11;break;case 10:return e.abrupt("return",r(d.message));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E={NEW:"NEW",UPDATED:"UPDATED",REMOVED:"REMOVED"},D=Object(d.c)({initialState:[],name:"conversions",reducers:{addRow:function(e,t){return[].concat(Object(O.a)(e),[Object(l.a)(Object(l.a)({},t.payload),{},{state:E.NEW})])},updateRow:function(e,t){var n=t.payload,c=n.id,a=n.data,r=n.track,s=void 0===r||r;return e.map((function(e){return e.id===c?Object(l.a)(Object(l.a)(Object(l.a)({},e),a),{},{state:s?E.UPDATED:void 0}):e}))},removeRow:function(e,t){return e.map((function(e){return e.id===t.payload?Object(l.a)(Object(l.a)({},e),{},{state:E.REMOVED}):e}))}},extraReducers:Object(b.a)({},k.fulfilled,(function(e,t){return t.payload}))}),R=D.actions,S=D.reducer,W=function(e){return e.conversions},M=Object(m.a)(W,(function(e){return e.filter((function(e){return e.state!==E.REMOVED}))})),P=Object(m.a)(W,(function(e){return e.filter((function(e){return e.state===E.UPDATED||e.state===E.REMOVED}))})),T=n(21),I=Object(d.b)("dict/load",Object(p.a)(x.a.mark((function e(){var t,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return t=e.sent,n=t.header,c=t.data,e.abrupt("return",c.map((function(e){return Object.entries(n).reduce((function(t,n){var c=Object(T.a)(n,2),a=c[0],r=c[1];return t[a]=e[r],t}),{})})));case 6:case"end":return e.stop()}}),e)})))),V=Object(d.c)({initialState:[],name:"dict",extraReducers:Object(b.a)({},I.fulfilled,(function(e,t){return t.payload}))}).reducer,N=function(e){return e.dict},A=Object(j.c)({conversions:S,dict:V}),F=Object(d.a)({reducer:A}),U=n(152),J=n(130),B=n(134),H=n(136),L=n(155),z=n(131),G=n(132),q=n(133),K=n(150),Q=n(135),X=n(137),Y=n(156),Z=n(3),$=function(e){var t=e.dict,n=void 0===t?[]:t,c=Object(f.a)(e,["dict"]);return Object(Z.jsxs)(K.a,Object(l.a)(Object(l.a)({select:!0},c),{},{children:[Object(Z.jsx)(Y.a,{value:"",children:"..."}),n.map((function(e){var t=e.id,n=e.name;return Object(Z.jsx)(Y.a,{value:t,children:n},t)}))]}))},ee=function(e){var t=Object(u.c)(N);return Object(Z.jsx)($,Object(l.a)({dict:t},e))},te=function(e){var t=e.onClose,n=Object(u.b)(),c=a.a.useState(!1),r=Object(T.a)(c,2),s=r[0],i=r[1],o=a.a.useState(!1),d=Object(T.a)(o,2),j=d[0],O=d[1],f=a.a.useState({}),h=Object(T.a)(f,2),m=h[0],v=h[1],y=a.a.useCallback(Object(p.a)(x.a.mark((function e(){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,n(C(m));case 3:(c=e.sent).error?O(c.payload):t(),i(!1);case 6:case"end":return e.stop()}}),e)}))),[n,t,m]),g=a.a.useCallback((function(e){return v((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))}),[]);return Object(Z.jsxs)(L.a,{open:!0,fullWidth:!0,children:[Object(Z.jsx)(z.a,{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u0447\u0451\u0442"}),Object(Z.jsxs)(G.a,{children:[j&&Object(Z.jsxs)(q.a,{color:"error",children:["\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438: ",j]}),Object(Z.jsxs)(B.a,{container:!0,spacing:2,children:[Object(Z.jsx)(B.a,{item:!0,xs:4,children:Object(Z.jsx)(ee,{name:"from",value:m.from,label:"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430",onChange:g,fullWidth:!0})}),Object(Z.jsx)(B.a,{item:!0,xs:4,children:Object(Z.jsx)(ee,{name:"to",value:m.to,onChange:g,label:"\u0426\u0435\u043b\u0435\u0432\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430",fullWidth:!0})}),Object(Z.jsx)(B.a,{item:!0,xs:4,children:Object(Z.jsx)(K.a,{type:"number",name:"amount",value:m.amount,onChange:g,label:"\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})})]})]}),Object(Z.jsxs)(Q.a,{children:[Object(Z.jsx)(H.a,{onClick:t,disabled:s,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Z.jsxs)(H.a,{onClick:y,disabled:s,color:"primary",children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",s&&Object(Z.jsx)(X.a,{size:14})]})]})]})},ne=n(138),ce=n(139),ae=n(153),re=n(144),se=n(145),ue=n(146),ie=n(149),oe=n(140),de=n(141),je=n(142),be=n(143),le=function(e){var t=e.row,n=e.getIsChecked,c=e.onChange,r=t.from_currency,s=t.to_currency,u=t.amount,i=t.converted,o=t.date_added,d=a.a.useCallback((function(e){c(t.id,e)}),[t.id,c]);return Object(Z.jsxs)(ne.a,{children:[Object(Z.jsx)(ce.a,{children:Object(Z.jsx)(ae.a,{name:"selected",checked:n(t.id),onChange:d})}),Object(Z.jsx)(ce.a,{children:Object(Z.jsx)(ee,{name:"from_currency",value:r,onChange:d,fullWidth:!0})}),Object(Z.jsx)(ce.a,{children:Object(Z.jsx)(ee,{name:"to_currency",value:s,onChange:d,fullWidth:!0})}),Object(Z.jsx)(ce.a,{children:Object(Z.jsx)(K.a,{name:"amount",value:u,onChange:d,type:"number",fullWidth:!0})}),Object(Z.jsx)(ce.a,{children:i}),Object(Z.jsx)(ce.a,{children:o})]})},Oe=function(e){var t;return t=Object(ie.a)(e,"yyyy-MM-dd",new Date),Object(oe.a)(t)||(t=Object(ie.a)(e,"yyyy-MM-dd HH:mm:ss",new Date)),t},fe=function(e){var t=e.filters,n=e.getIsChecked,c=e.onChange,r=Object(u.c)(M),s=a.a.useMemo((function(){var e=Object.entries(t).reduce((function(e,t){var n=Object(T.a)(t,2),c=n[0],a=n[1],r=null;if(a)switch(c){case"date_added_from":r=function(e){var t=Oe(e.date_added),n=Oe(a);return!!t&&Object(de.a)(t,Object(je.a)(n))>=0};break;case"date_added_to":r=function(e){var t=Oe(e.date_added),n=Oe(a);return!!t&&Object(de.a)(Object(be.a)(n),t)>=0};break;default:r=function(e){return e[c]===a}}return r&&e.push(r),e}),[]);return r.filter((function(t){return e.every((function(e){return e(t)}))}))}),[t,r]);return Object(Z.jsx)(U.a,{mt:2,flexGrow:1,children:Object(Z.jsx)(J.a,{children:Object(Z.jsxs)(re.a,{children:[Object(Z.jsxs)("colgroup",{children:[Object(Z.jsx)("col",{width:"24px"}),Object(Z.jsx)("col",{width:"20%"}),Object(Z.jsx)("col",{width:"20%"}),Object(Z.jsx)("col",{width:"20%"}),Object(Z.jsx)("col",{width:"20%"}),Object(Z.jsx)("col",{width:"20%"})]}),Object(Z.jsx)(se.a,{children:Object(Z.jsxs)(ne.a,{children:[Object(Z.jsx)(ce.a,{}),Object(Z.jsx)(ce.a,{children:"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430"}),Object(Z.jsx)(ce.a,{children:"\u0426\u0435\u043b\u0435\u0432\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430"}),Object(Z.jsx)(ce.a,{children:"\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),Object(Z.jsx)(ce.a,{children:"\u0426\u0435\u043b\u0435\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),Object(Z.jsx)(ce.a,{children:"\u0414\u0430\u0442\u0430 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0438"})]})}),Object(Z.jsx)(ue.a,{children:s.map((function(e){return Object(Z.jsx)(le,{row:e,getIsChecked:n,onChange:c},e.id)}))})]})})})},he=n(76),xe=function(e){var t=e.data,n=e.onChange;return Object(Z.jsx)(U.a,{mt:2,p:2,clone:!0,children:Object(Z.jsx)(J.a,{children:Object(Z.jsxs)(B.a,{container:!0,spacing:2,children:[Object(Z.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[Object(Z.jsx)(he.a,{variant:"body1",children:"\u0412\u0430\u043b\u044e\u0442\u0430"}),Object(Z.jsxs)(B.a,{container:!0,spacing:2,children:[Object(Z.jsx)(B.a,{item:!0,xs:6,children:Object(Z.jsx)(ee,{name:"from_currency",value:t.from_currency,label:"\u0418\u0441\u0445\u043e\u0434\u043d\u0430\u044f",onChange:n,fullWidth:!0})}),Object(Z.jsx)(B.a,{item:!0,xs:6,children:Object(Z.jsx)(ee,{name:"to_currency",value:t.to_currency,onChange:n,label:"\u0426\u0435\u043b\u0435\u0432\u0430\u044f",fullWidth:!0})})]})]}),Object(Z.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[Object(Z.jsx)(he.a,{variant:"body1",children:"\u0414\u0430\u0442\u0430 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0438\u0438"}),Object(Z.jsxs)(B.a,{container:!0,spacing:2,children:[Object(Z.jsx)(B.a,{item:!0,xs:6,children:Object(Z.jsx)(K.a,{value:t.date_added_from,onChange:n,name:"date_added_from",label:"\u0441",type:"date",fullWidth:!0})}),Object(Z.jsx)(B.a,{item:!0,xs:6,children:Object(Z.jsx)(K.a,{value:t.date_added_to,onChange:n,name:"date_added_to",label:"\u043f\u043e",type:"date",fullWidth:!0})})]})]})]})})})},pe=function(){var e=Object(u.b)();Object(c.useEffect)((function(){(function(){var t=Object(p.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(I());case 2:return t.next=4,e(k());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]);var t=a.a.useState({from_currency:"",to_currency:"",date_added_from:"",date_added_to:""}),n=Object(T.a)(t,2),r=n[0],s=n[1],i=a.a.useCallback((function(e){s((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))}),[]),o=a.a.useState([]),d=Object(T.a)(o,2),j=d[0],f=d[1],h=a.a.useCallback((function(e){return-1!==j.findIndex((function(t){return t===e}))}),[j]),m=a.a.useState(!1),v=Object(T.a)(m,2),y=v[0],g=v[1],w=a.a.useCallback((function(){return g(!0)}),[]),C=a.a.useCallback((function(){return g(!1)}),[]),E=a.a.useCallback((function(){j.map((function(t){return e(R.removeRow(t))})),f([])}),[e,j]),D=a.a.useCallback((function(t,n){var c=n.target.name;"selected"!==c?e(R.updateRow({id:t,data:Object(b.a)({},c,n.target.value)})):f((function(e){return-1!==e.findIndex((function(e){return e===t}))?e.filter((function(e){return e!==t})):[].concat(Object(O.a)(e),[t])}))}),[e]),S=a.a.useCallback(Object(p.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(_());case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)}))),[e]),W=Object(u.c)(P).length>0;return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(xe,{data:r,onChange:i}),Object(Z.jsx)(fe,{filters:r,getIsChecked:h,onChange:D}),y&&Object(Z.jsx)(te,{onClose:C}),Object(Z.jsx)(U.a,{p:2,mt:2,clone:!0,children:Object(Z.jsx)(J.a,{children:Object(Z.jsxs)(B.a,{container:!0,justify:"space-between",children:[Object(Z.jsx)(B.a,{item:!0,children:Object(Z.jsx)(H.a,{onClick:E,disabled:0===j.length,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435"})}),Object(Z.jsx)(B.a,{item:!0,children:Object(Z.jsx)(H.a,{onClick:w,color:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u0447\u0451\u0442"})}),Object(Z.jsx)(B.a,{item:!0,children:Object(Z.jsx)(H.a,{onClick:S,disabled:!W,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})})]})})})]})};var me=function(){return Object(Z.jsxs)(u.a,{store:F,children:[Object(Z.jsx)(i.a,{}),Object(Z.jsx)(o.a,{children:Object(Z.jsx)(pe,{})})]})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,159)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(Z.jsx)(a.a.StrictMode,{children:Object(Z.jsx)(me,{})}),document.getElementById("root")),ve()}},[[99,1,2]]]);
//# sourceMappingURL=main.a6e0090f.chunk.js.map